# K-memo Qt Quick (QML) é‡æ„æŠ€æœ¯æ–¹æ¡ˆ

**é¡¹ç›®ç¼–å·ï¼š** [101]  
**æ–‡æ¡£ç±»å‹ï¼š** é˜¶æ®µæ€§å®æ–½æ–¹æ¡ˆ  
**åˆ›å»ºæ—¶é—´ï¼š** 2025-10-25  
**é¢„è®¡å·¥ä½œé‡ï¼š** 15-20å¤©  
**æŠ€æœ¯é£é™©ï¼š** ä¸­ç­‰  

---

## ğŸ“‘ ç›®å½•

- [ä¸€ã€é‡æ„èƒŒæ™¯ä¸ç›®æ ‡](#ä¸€é‡æ„èƒŒæ™¯ä¸ç›®æ ‡)
  - [1.1 å½“å‰çŠ¶å†µ](#å½“å‰çŠ¶å†µ)
  - [1.2 é‡æ„ç›®æ ‡](#é‡æ„ç›®æ ‡)
- [äºŒã€æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆ](#äºŒæ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆ)
  - [2.1 æ¶æ„å˜æ›´ï¼šMVVMæ¨¡å¼](#æ¶æ„å˜æ›´mvvmæ¨¡å¼)
  - [2.2 CMakeé…ç½®å˜æ›´](#cmakeé…ç½®å˜æ›´)
- [ä¸‰ã€é¡¹ç›®å±‚çº§æ¶æ„è¯¦è§£](#ä¸‰é¡¹ç›®å±‚çº§æ¶æ„è¯¦è§£)
  - [3.1 æ•´ä½“æ¶æ„è§†å›¾](#31-æ•´ä½“æ¶æ„è§†å›¾)
  - [3.2 ç›®å½•ç»“æ„ä¸èŒè´£åˆ’åˆ†](#32-ç›®å½•ç»“æ„ä¸èŒè´£åˆ’åˆ†)
  - [3.3 æ–‡ä»¶å‘½åè§„èŒƒ](#33-æ–‡ä»¶å‘½åè§„èŒƒ)
  - [3.4 æ¶æ„å±‚æ¬¡æ˜ å°„](#34-æ¶æ„å±‚æ¬¡æ˜ å°„)
  - [3.5 ä¾èµ–å…³ç³»è§„åˆ™](#35-ä¾èµ–å…³ç³»è§„åˆ™)
- [å››ã€è¯¦ç»†å®æ–½è®¡åˆ’ï¼ˆ10ä¸ªä»»åŠ¡ï¼‰](#å››è¯¦ç»†å®æ–½è®¡åˆ’10ä¸ªä»»åŠ¡)
- [äº”ã€å…³é”®æŠ€æœ¯å®ç°](#äº”å…³é”®æŠ€æœ¯å®ç°)
  - [5.1 TaskModelä¸QMLçš„å¤©ç„¶é€‚é…](#51-taskmodelä¸qmlçš„å¤©ç„¶é€‚é…)
  - [5.2 Main.qmlä¸»çª—å£å®ç°](#52-mainqmlä¸»çª—å£å®ç°)
- [å…­ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#å…­æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
  - [6.1 ListViewä¼˜åŒ–](#61-listviewä¼˜åŒ–)
  - [6.2 æ€§èƒ½ç›®æ ‡](#62-æ€§èƒ½ç›®æ ‡)
- [ä¸ƒã€é£é™©ç®¡ç†](#ä¸ƒé£é™©ç®¡ç†)
  - [7.1 å›æ»šç­–ç•¥](#71-å›æ»šç­–ç•¥)
- [å…«ã€éªŒæ”¶æ ‡å‡†](#å…«éªŒæ”¶æ ‡å‡†)
  - [8.1 åŠŸèƒ½éªŒæ”¶](#81-åŠŸèƒ½éªŒæ”¶)
  - [8.2 æ€§èƒ½éªŒæ”¶](#82-æ€§èƒ½éªŒæ”¶)
  - [8.3 è§†è§‰éªŒæ”¶](#83-è§†è§‰éªŒæ”¶)
- [ä¹ã€å…³é”®å†³ç­–](#ä¹å…³é”®å†³ç­–)
  - [9.1 ä¸ºä»€ä¹ˆé€‰æ‹©Qt Quickï¼Ÿ](#91-ä¸ºä»€ä¹ˆé€‰æ‹©qt-quick)
  - [9.2 ä¸ºä»€ä¹ˆä¿æŒC++åç«¯ä¸å˜ï¼Ÿ](#92-ä¸ºä»€ä¹ˆä¿æŒcåç«¯ä¸å˜)
- [åã€å‚è€ƒèµ„æ–™](#åå‚è€ƒèµ„æ–™)
- [åä¸€ã€æ€»ç»“](#åä¸€æ€»ç»“)
- [é™„å½•ï¼šé¡¹ç›®ç»“æ„å˜æ›´](#é™„å½•é¡¹ç›®ç»“æ„å˜æ›´)

---

## ä¸€ã€é‡æ„èƒŒæ™¯ä¸ç›®æ ‡

### å½“å‰çŠ¶å†µ
K-memoé¡¹ç›®ä½¿ç”¨ **Qt Widgets + QSS** æ„å»ºç•Œé¢ï¼š
- ç•Œé¢æ ·å¼åƒµç¡¬ï¼ŒåŠ¨ç”»æ•ˆæœå—é™
- ä½¿ç”¨emojiå›¾æ ‡ä¸å¤Ÿä¸“ä¸š
- ç§»åŠ¨é£æ ¼éš¾ä»¥å®ç°

### é‡æ„ç›®æ ‡
è¿ç§»åˆ° **Qt Quick (QML)**ï¼Œå®ç°ï¼š
- âœ… ç°ä»£åŒ–Material Designé£æ ¼
- âœ… æµç•…çš„60FPSåŠ¨ç”»
- âœ… ä¿æŒæ‰€æœ‰C++åç«¯é€»è¾‘ä¸å˜

---

## äºŒã€æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆ

### æ¶æ„å˜æ›´ï¼šMVVMæ¨¡å¼

```
QML UIå±‚ (View)
    â†• å±æ€§ç»‘å®š/ä¿¡å·æ§½
C++ Modelå±‚ (ä¿æŒä¸å˜)
    â†• SQLæ“ä½œ  
SQLiteæ•°æ®åº“
```

### CMakeé…ç½®å˜æ›´

```cmake
# æ–°å¢Qt Quickæ¨¡å—
find_package(Qt6 REQUIRED COMPONENTS 
    Core Quick Qml QuickControls2 Sql
)

qt_add_qml_module(k-memo
    URI KMemo
    VERSION 1.0
    QML_FILES
        qml/Main.qml
        qml/components/cards/StatsCard.qml
        qml/components/cards/AddTaskCard.qml
        qml/components/cards/TaskListCard.qml
        qml/components/items/TaskItem.qml
)

target_link_libraries(k-memo PRIVATE 
    Qt6::Core Qt6::Quick Qt6::Qml 
    Qt6::QuickControls2 Qt6::Sql
)
```

---

## ä¸‰ã€é¡¹ç›®å±‚çº§æ¶æ„è¯¦è§£

### 3.1 æ•´ä½“æ¶æ„è§†å›¾

K-memoé¡¹ç›®é‡‡ç”¨**åˆ†å±‚æ¶æ„**è®¾è®¡ï¼Œå°†ä»£ç æŒ‰èŒè´£æ¸…æ™°åˆ†ç¦»ä¸ºä¸åŒå±‚æ¬¡å’Œç›®å½•ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¡¨ç°å±‚ (Presentation Layer)              â”‚
â”‚  è·¯å¾„: k-memo/qml/                                          â”‚
â”‚  èŒè´£: ç”¨æˆ·ç•Œé¢ã€äº¤äº’é€»è¾‘ã€è§†è§‰å±•ç¤º                        â”‚
â”‚  æŠ€æœ¯: QML + Qt Quick Controls 2 Material                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ å±æ€§ç»‘å®š / ä¿¡å·æ§½ / Context Property
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic Layer)        â”‚
â”‚  è·¯å¾„: k-memo/models/, k-memo/managers/                    â”‚
â”‚  èŒè´£: æ•°æ®æ¨¡å‹ã€ä¸šåŠ¡è§„åˆ™ã€ç³»ç»Ÿç®¡ç†                        â”‚
â”‚  æŠ€æœ¯: C++ + Qt Core                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ SQLæ“ä½œ / æ•°æ®åº“API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®è®¿é—®å±‚ (Data Access Layer)           â”‚
â”‚  è·¯å¾„: k-memo/database/                                     â”‚
â”‚  èŒè´£: æ•°æ®åº“æ“ä½œã€SQLå°è£…ã€äº‹åŠ¡ç®¡ç†                       â”‚
â”‚  æŠ€æœ¯: Qt::Sql + SQLite                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ SQLæŸ¥è¯¢ / æ•°æ®æŒä¹…åŒ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨å±‚ (Data Storage Layer)          â”‚
â”‚  è·¯å¾„: k-memo/data/                                         â”‚
â”‚  èŒè´£: ç‰©ç†æ•°æ®å­˜å‚¨ã€æ•°æ®åº“æ–‡ä»¶                            â”‚
â”‚  æŠ€æœ¯: SQLiteæ–‡ä»¶ç³»ç»Ÿ                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.2 ç›®å½•ç»“æ„ä¸èŒè´£åˆ’åˆ†

#### ğŸ“‚ `k-memo/` - é¡¹ç›®æ ¹ç›®å½•

```
k-memo/
â”œâ”€â”€ qml/                          # ã€è¡¨ç°å±‚ã€‘QML UIæºç 
â”œâ”€â”€ models/                       # ã€ä¸šåŠ¡é€»è¾‘å±‚ã€‘æ•°æ®æ¨¡å‹
â”œâ”€â”€ database/                     # ã€æ•°æ®è®¿é—®å±‚ã€‘æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ managers/                     # ã€ä¸šåŠ¡é€»è¾‘å±‚ã€‘ç³»ç»Ÿç®¡ç†å™¨
â”œâ”€â”€ icons/                        # ã€èµ„æºå±‚ã€‘SVGå›¾æ ‡èµ„æº
â”œâ”€â”€ data/                         # ã€æ•°æ®å­˜å‚¨å±‚ã€‘è¿è¡Œæ—¶æ•°æ®
â”œâ”€â”€ test/                         # ã€æµ‹è¯•å±‚ã€‘æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ build/                        # ã€æ„å»ºå±‚ã€‘ç¼–è¯‘è¾“å‡ºï¼ˆgitignoreï¼‰
â”œâ”€â”€ main.cpp                      # ã€å…¥å£å±‚ã€‘åº”ç”¨ç¨‹åºå…¥å£
â”œâ”€â”€ CMakeLists.txt                # ã€é…ç½®å±‚ã€‘CMakeæ„å»ºé…ç½®
â””â”€â”€ resources.qrc                 # ã€èµ„æºå±‚ã€‘Qtèµ„æºæ–‡ä»¶
```

---

#### ğŸ¨ `qml/` - è¡¨ç°å±‚ï¼ˆUIå±‚ï¼‰

**æ¶æ„å±‚æ¬¡ï¼š** è¡¨ç°å±‚ (Presentation Layer)  
**èŒè´£èŒƒå›´ï¼š**
- ç”¨æˆ·ç•Œé¢å±•ç¤ºï¼ˆçª—å£ã€é¡µé¢ã€ç»„ä»¶ï¼‰
- ç”¨æˆ·äº¤äº’å¤„ç†ï¼ˆç‚¹å‡»ã€è¾“å…¥ã€æ‰‹åŠ¿ï¼‰
- è§†è§‰æ•ˆæœå®ç°ï¼ˆåŠ¨ç”»ã€è¿‡æ¸¡ã€ä¸»é¢˜ï¼‰
- æ•°æ®ç»‘å®šå’Œå±•ç¤ºé€»è¾‘

**ç›®å½•ç»“æ„ï¼š**
```
qml/
â”œâ”€â”€ Main.qml                      # ä¸»çª—å£å…¥å£
â”œâ”€â”€ components/                   # å¯å¤ç”¨UIç»„ä»¶
â”‚   â”œâ”€â”€ cards/                   # å¡ç‰‡ç±»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ StatsCard.qml        # ç»Ÿè®¡å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ AddTaskCard.qml      # æ·»åŠ ä»»åŠ¡å¡ç‰‡
â”‚   â”‚   â””â”€â”€ TaskListCard.qml     # ä»»åŠ¡åˆ—è¡¨å¡ç‰‡
â”‚   â”œâ”€â”€ items/                   # åˆ—è¡¨é¡¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ TaskItem.qml         # ä»»åŠ¡é¡¹å§”æ‰˜
â”‚   â””â”€â”€ buttons/                 # æŒ‰é’®ç»„ä»¶ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ pages/                        # é¡µé¢çº§ç»„ä»¶ï¼ˆæ‰©å±•ç”¨ï¼‰
â”‚   â””â”€â”€ SettingsPage.qml         # è®¾ç½®é¡µé¢
â”œâ”€â”€ dialogs/                      # å¯¹è¯æ¡†ç»„ä»¶
â”‚   â””â”€â”€ TaskDetailDialog.qml     # ä»»åŠ¡è¯¦æƒ…å¯¹è¯æ¡†
â””â”€â”€ styles/                       # æ ·å¼å’Œä¸»é¢˜é…ç½®
    â”œâ”€â”€ Theme.qml                # ä¸»é¢˜å•ä¾‹
    â”œâ”€â”€ Colors.qml               # é¢œè‰²å®šä¹‰
    â””â”€â”€ qmldir                   # QMLæ¨¡å—å®šä¹‰æ–‡ä»¶
```

**æ–‡ä»¶ç±»å‹è§„èŒƒï¼š**
- **å…¥å£æ–‡ä»¶** (`Main.qml`): åº”ç”¨ä¸»çª—å£ï¼ŒåŒ…å«è·¯ç”±å’Œå…¨å±€çŠ¶æ€
- **ç»„ä»¶æ–‡ä»¶** (`*Card.qml`, `*Item.qml`): å¯å¤ç”¨çš„UIç»„ä»¶
- **é¡µé¢æ–‡ä»¶** (`*Page.qml`): å®Œæ•´çš„é¡µé¢çº§UI
- **å¯¹è¯æ¡†æ–‡ä»¶** (`*Dialog.qml`): æ¨¡æ€æˆ–éæ¨¡æ€å¯¹è¯æ¡†
- **æ ·å¼æ–‡ä»¶** (`Theme.qml`, `Colors.qml`): å…¨å±€æ ·å¼é…ç½®

**ä¾èµ–è§„åˆ™ï¼š**
- âœ… å¯ä»¥å¼•ç”¨ï¼š`styles/`ã€å…¶ä»–`components/`
- âœ… å¯ä»¥è°ƒç”¨ï¼šC++æš´éœ²çš„å¯¹è±¡å’Œæ–¹æ³•ï¼ˆé€šè¿‡context propertyï¼‰
- âŒ ç¦æ­¢å¼•ç”¨ï¼šC++å¤´æ–‡ä»¶ï¼ˆQMLä¸ç›´æ¥include C++ï¼‰
- âŒ ç¦æ­¢åŒ…å«ï¼šä¸šåŠ¡é€»è¾‘ä»£ç ï¼ˆä¿æŒUIç»„ä»¶çº¯ç²¹ï¼‰

---

#### ğŸ§© `models/` - ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆæ¨¡å‹å±‚ï¼‰

**æ¶æ„å±‚æ¬¡ï¼š** ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic Layer)  
**èŒè´£èŒƒå›´ï¼š**
- æ•°æ®æ¨¡å‹å®šä¹‰ï¼ˆTaskå®ä½“ç±»ï¼‰
- æ•°æ®æ¨¡å‹ç®¡ç†ï¼ˆTaskModelæ•°æ®é›†åˆï¼‰
- ä¸šåŠ¡è§„åˆ™éªŒè¯ï¼ˆæ•°æ®åˆæ³•æ€§æ£€æŸ¥ï¼‰
- æ•°æ®è½¬æ¢å’Œæ ¼å¼åŒ–

**ç›®å½•ç»“æ„ï¼š**
```
models/
â”œâ”€â”€ task.h                        # Taskå®ä½“ç±»å¤´æ–‡ä»¶
â”œâ”€â”€ task.cpp                      # Taskå®ä½“ç±»å®ç°
â”œâ”€â”€ taskmodel.h                   # TaskModelæ•°æ®æ¨¡å‹å¤´æ–‡ä»¶
â””â”€â”€ taskmodel.cpp                 # TaskModelæ•°æ®æ¨¡å‹å®ç°
```

**æ–‡ä»¶èŒè´£ï¼š**
- **`task.h/.cpp`**: 
  - å®šä¹‰Taskå®ä½“ç±»ï¼ˆid, title, description, priority, statusç­‰ï¼‰
  - å®ç°æšä¸¾ç±»å‹ï¼ˆTaskPriority, TaskStatusï¼‰
  - æä¾›JSONåºåˆ—åŒ–/ååºåˆ—åŒ–æ–¹æ³•
  - å®ç°æ•°æ®éªŒè¯é€»è¾‘

- **`taskmodel.h/.cpp`**: 
  - ç»§æ‰¿QAbstractListModelï¼Œé€‚é…QML ListView
  - å®ç°roleNames()æš´éœ²æ•°æ®è§’è‰²ç»™QML
  - æä¾›å¢åˆ æ”¹æŸ¥æ¥å£ï¼ˆaddTask, removeTask, updateTaskï¼‰
  - ç®¡ç†ä»»åŠ¡åˆ—è¡¨æ•°æ®ï¼ˆm_tasksï¼‰
  - è¿æ¥DatabaseManagerè¿›è¡ŒæŒä¹…åŒ–

**ä¾èµ–è§„åˆ™ï¼š**
- âœ… å¯ä»¥å¼•ç”¨ï¼š`database/`ï¼ˆè°ƒç”¨DatabaseManagerï¼‰
- âœ… å¯ä»¥ä½¿ç”¨ï¼šQt Coreæ¨¡å—ï¼ˆQObject, QAbstractListModelç­‰ï¼‰
- âŒ ç¦æ­¢å¼•ç”¨ï¼š`qml/`ï¼ˆæ¨¡å‹ä¸ä¾èµ–UIï¼‰
- âŒ ç¦æ­¢å¼•ç”¨ï¼š`managers/`ï¼ˆä¿æŒæ¨¡å‹ç‹¬ç«‹æ€§ï¼‰

---

#### ğŸ’¾ `database/` - æ•°æ®è®¿é—®å±‚

**æ¶æ„å±‚æ¬¡ï¼š** æ•°æ®è®¿é—®å±‚ (Data Access Layer)  
**èŒè´£èŒƒå›´ï¼š**
- æ•°æ®åº“è¿æ¥ç®¡ç†
- SQLè¯­å¥å°è£…
- äº‹åŠ¡ç®¡ç†
- æ•°æ®åº“ç‰ˆæœ¬è¿ç§»

**ç›®å½•ç»“æ„ï¼š**
```
database/
â”œâ”€â”€ databasemanager.h             # æ•°æ®åº“ç®¡ç†å™¨å¤´æ–‡ä»¶
â””â”€â”€ databasemanager.cpp           # æ•°æ®åº“ç®¡ç†å™¨å®ç°
```

**DatabaseManagerèŒè´£ï¼š**
- **å•ä¾‹æ¨¡å¼** - ç¡®ä¿å…¨å±€å”¯ä¸€æ•°æ®åº“è¿æ¥
- **åˆå§‹åŒ–** - åˆ›å»ºæ•°æ®åº“æ–‡ä»¶å’Œè¡¨ç»“æ„
- **CRUDæ“ä½œ** - insertTask, updateTask, deleteTask, getAllTasks
- **äº‹åŠ¡æ”¯æŒ** - æ‰¹é‡æ“ä½œçš„äº‹åŠ¡åŒ…è£…
- **é”™è¯¯å¤„ç†** - SQLé”™è¯¯æ•è·å’Œæ—¥å¿—è®°å½•
- **ç‰ˆæœ¬ç®¡ç†** - æ•°æ®åº“schemaç‰ˆæœ¬è¿ç§»

**ä¾èµ–è§„åˆ™ï¼š**
- âœ… å¯ä»¥ä½¿ç”¨ï¼šQt::Sqlæ¨¡å—ï¼ˆQSqlDatabase, QSqlQueryç­‰ï¼‰
- âœ… å¯ä»¥å¼•ç”¨ï¼š`models/task.h`ï¼ˆè¿”å›Taskå¯¹è±¡ï¼‰
- âŒ ç¦æ­¢å¼•ç”¨ï¼š`models/taskmodel.h`ï¼ˆé¿å…å¾ªç¯ä¾èµ–ï¼‰
- âŒ ç¦æ­¢å¼•ç”¨ï¼šUIå±‚å’Œç®¡ç†å™¨å±‚

---

#### âš™ï¸ `managers/` - ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆç®¡ç†å™¨å±‚ï¼‰

**æ¶æ„å±‚æ¬¡ï¼š** ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic Layer)  
**èŒè´£èŒƒå›´ï¼š**
- ç³»ç»Ÿçº§åŠŸèƒ½ç®¡ç†
- æ“ä½œç³»ç»Ÿé›†æˆ
- è·¨æ¨¡å—åè°ƒ

**ç›®å½•ç»“æ„ï¼š**
```
managers/
â”œâ”€â”€ traymanager.h                 # ç³»ç»Ÿæ‰˜ç›˜ç®¡ç†å™¨å¤´æ–‡ä»¶
â”œâ”€â”€ traymanager.cpp               # ç³»ç»Ÿæ‰˜ç›˜ç®¡ç†å™¨å®ç°
â”œâ”€â”€ notificationmanager.h         # é€šçŸ¥ç®¡ç†å™¨å¤´æ–‡ä»¶
â””â”€â”€ notificationmanager.cpp       # é€šçŸ¥ç®¡ç†å™¨å®ç°
```

**TrayManagerèŒè´£ï¼š**
- åˆ›å»ºå’Œç®¡ç†QSystemTrayIcon
- å®ç°æ‰˜ç›˜èœå•ï¼ˆæ˜¾ç¤ºã€éšè—ã€é€€å‡ºï¼‰
- æ›´æ–°æ‰˜ç›˜å›¾æ ‡å’Œæç¤ºä¿¡æ¯
- **QMLæ¥å£**ï¼ˆé‡æ„åæ–°å¢ï¼‰ï¼š
  - `Q_INVOKABLE void showMainWindow()`
  - `Q_INVOKABLE void hideMainWindow()`
  - `Q_INVOKABLE void updateTaskCount(int count)`

**NotificationManagerèŒè´£ï¼š**
- å°è£…ç³»ç»Ÿé€šçŸ¥åŠŸèƒ½
- æ”¯æŒWindows Toasté€šçŸ¥ï¼ˆæœªæ¥æ‰©å±•ï¼‰
- å½“å‰ä½¿ç”¨QSystemTrayIcon::showMessage
- **QMLæ¥å£**ï¼ˆé‡æ„åæ–°å¢ï¼‰ï¼š
  - `Q_INVOKABLE void showNotification(QString title, QString message)`

**ä¾èµ–è§„åˆ™ï¼š**
- âœ… å¯ä»¥ä½¿ç”¨ï¼šQt::Widgetsï¼ˆQSystemTrayIconï¼‰
- âœ… å¯ä»¥å¼•ç”¨ï¼šQMLå¼•æ“ï¼ˆæŒæœ‰QQmlApplicationEngineæŒ‡é’ˆï¼‰
- âŒ ç¦æ­¢å¼•ç”¨ï¼š`models/`ï¼ˆç®¡ç†å™¨ä¸ç›´æ¥æ“ä½œæ•°æ®ï¼‰
- âŒ ç¦æ­¢å¼•ç”¨ï¼š`database/`ï¼ˆé€šè¿‡Modelå±‚é—´æ¥è®¿é—®ï¼‰

---

#### ğŸ¨ `icons/` - èµ„æºå±‚

**æ¶æ„å±‚æ¬¡ï¼š** èµ„æºå±‚ (Resource Layer)  
**èŒè´£èŒƒå›´ï¼š**
- å­˜å‚¨SVGçŸ¢é‡å›¾æ ‡
- æŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡
- ä¾›QMLå’ŒC++å¼•ç”¨

**ç›®å½•ç»“æ„ï¼š**
```
icons/
â”œâ”€â”€ actions/                      # æ“ä½œå›¾æ ‡
â”‚   â”œâ”€â”€ add.svg                  # æ·»åŠ å›¾æ ‡
â”‚   â”œâ”€â”€ delete.svg               # åˆ é™¤å›¾æ ‡
â”‚   â”œâ”€â”€ edit.svg                 # ç¼–è¾‘å›¾æ ‡
â”‚   â””â”€â”€ complete.svg             # å®Œæˆå›¾æ ‡
â”œâ”€â”€ categories/                   # åˆ†ç±»å›¾æ ‡
â”‚   â”œâ”€â”€ work.svg                 # å·¥ä½œåˆ†ç±»
â”‚   â”œâ”€â”€ study.svg                # å­¦ä¹ åˆ†ç±»
â”‚   â”œâ”€â”€ personal.svg             # ä¸ªäººåˆ†ç±»
â”‚   â””â”€â”€ all.svg                  # å…¨éƒ¨åˆ†ç±»
â”œâ”€â”€ priority/                     # ä¼˜å…ˆçº§å›¾æ ‡
â”‚   â”œâ”€â”€ low.svg                  # ä½ä¼˜å…ˆçº§
â”‚   â”œâ”€â”€ normal.svg               # æ™®é€šä¼˜å…ˆçº§
â”‚   â”œâ”€â”€ high.svg                 # é«˜ä¼˜å…ˆçº§
â”‚   â””â”€â”€ urgent.svg               # ç´§æ€¥ä¼˜å…ˆçº§
â”œâ”€â”€ status/                       # çŠ¶æ€å›¾æ ‡
â”‚   â”œâ”€â”€ pending.svg              # å¾…åŠçŠ¶æ€
â”‚   â”œâ”€â”€ inprogress.svg           # è¿›è¡Œä¸­çŠ¶æ€
â”‚   â”œâ”€â”€ completed.svg            # å·²å®ŒæˆçŠ¶æ€
â”‚   â””â”€â”€ cancelled.svg            # å·²å–æ¶ˆçŠ¶æ€
â””â”€â”€ ui/                          # UIç•Œé¢å›¾æ ‡
    â”œâ”€â”€ theme-light.svg          # æµ…è‰²ä¸»é¢˜å›¾æ ‡
    â”œâ”€â”€ theme-dark.svg           # æš—è‰²ä¸»é¢˜å›¾æ ‡
    â””â”€â”€ collapse.svg             # æŠ˜å å›¾æ ‡
```

**å‘½åè§„èŒƒï¼š**
- å…¨éƒ¨å°å†™å­—æ¯
- å•è¯é—´ç”¨è¿å­—ç¬¦åˆ†éš”ï¼ˆkebab-caseï¼‰
- æè¿°æ€§å‘½åï¼Œè§åçŸ¥æ„
- ç»Ÿä¸€ä½¿ç”¨`.svg`æ‰©å±•å

**åœ¨QMLä¸­ä½¿ç”¨ï¼š**
```qml
Image {
    source: "qrc:/icons/actions/add.svg"
    sourceSize: Qt.size(24, 24)
}
```

---

#### ğŸ“Š `data/` - æ•°æ®å­˜å‚¨å±‚

**æ¶æ„å±‚æ¬¡ï¼š** æ•°æ®å­˜å‚¨å±‚ (Data Storage Layer)  
**èŒè´£èŒƒå›´ï¼š**
- å­˜å‚¨SQLiteæ•°æ®åº“æ–‡ä»¶
- å­˜å‚¨ç”¨æˆ·é…ç½®æ–‡ä»¶
- è¿è¡Œæ—¶ç”Ÿæˆçš„æ•°æ®

**ç›®å½•ç»“æ„ï¼š**
```
data/
â”œâ”€â”€ .gitkeep                      # Gitå ä½æ–‡ä»¶
â””â”€â”€ (è¿è¡Œæ—¶ç”Ÿæˆçš„æ–‡ä»¶)
    â”œâ”€â”€ tasks.db                 # SQLiteæ•°æ®åº“æ–‡ä»¶ï¼ˆè¿è¡Œæ—¶ç”Ÿæˆï¼‰
    â”œâ”€â”€ config.json              # é…ç½®æ–‡ä»¶ï¼ˆè¿è¡Œæ—¶ç”Ÿæˆï¼‰
    â””â”€â”€ logs/                    # æ—¥å¿—æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
```

**é‡è¦è¯´æ˜ï¼š**
- âš ï¸ `data/`ç›®å½•å·²æ·»åŠ åˆ°`.gitignore`
- âš ï¸ ä»…`.gitkeep`æ–‡ä»¶çº³å…¥ç‰ˆæœ¬æ§åˆ¶
- âš ï¸ æ‰€æœ‰å®é™…æ•°æ®æ–‡ä»¶éƒ½ä¸æäº¤åˆ°Git

---

#### ğŸ§ª `test/` - æµ‹è¯•å±‚

**æ¶æ„å±‚æ¬¡ï¼š** æµ‹è¯•å±‚ (Test Layer)  
**èŒè´£èŒƒå›´ï¼š**
- å•å…ƒæµ‹è¯•ä»£ç 
- é›†æˆæµ‹è¯•ä»£ç 
- ä¸´æ—¶æµ‹è¯•è„šæœ¬

**è§„èŒƒè¦æ±‚ï¼š**
- ä»…ä¿ç•™**é•¿æœŸæµ‹è¯•æ–‡ä»¶**
- ä¸´æ—¶æµ‹è¯•æ–‡ä»¶ä½¿ç”¨åå¿…é¡»åˆ é™¤
- æµ‹è¯•æ–‡ä»¶å‘½åï¼š`test_*.cpp`æˆ–`*_test.cpp`

---

#### ğŸ”§ `build/` - æ„å»ºå±‚

**æ¶æ„å±‚æ¬¡ï¼š** æ„å»ºå±‚ (Build Layer)  
**èŒè´£èŒƒå›´ï¼š**
- CMakeç”Ÿæˆçš„æ„å»ºæ–‡ä»¶
- ç¼–è¯‘å™¨è¾“å‡ºçš„ä¸­é—´æ–‡ä»¶
- å¯æ‰§è¡Œæ–‡ä»¶è¾“å‡º

**é‡è¦è¯´æ˜ï¼š**
- âš ï¸ `build/`ç›®å½•å·²æ·»åŠ åˆ°`.gitignore`
- âš ï¸ æ‰€æœ‰æ–‡ä»¶éƒ½ä¸çº³å…¥ç‰ˆæœ¬æ§åˆ¶
- âš ï¸ æ¯æ¬¡clean buildä¼šæ¸…ç©ºæ­¤ç›®å½•

---

### 3.3 æ–‡ä»¶å‘½åè§„èŒƒ

#### QMLæ–‡ä»¶å‘½åè§„èŒƒ

| æ–‡ä»¶ç±»å‹ | å‘½åè§„èŒƒ | ç¤ºä¾‹ |
|---------|---------|------|
| ä¸»çª—å£ | `Main.qml` | `Main.qml` |
| ç»„ä»¶ | PascalCase + åŠŸèƒ½æè¿° | `StatsCard.qml`, `TaskItem.qml` |
| é¡µé¢ | PascalCase + `Page` | `SettingsPage.qml` |
| å¯¹è¯æ¡† | PascalCase + `Dialog` | `TaskDetailDialog.qml` |
| æ ·å¼å•ä¾‹ | PascalCaseå•ä¸€åè¯ | `Theme.qml`, `Colors.qml` |

#### C++æ–‡ä»¶å‘½åè§„èŒƒ

| æ–‡ä»¶ç±»å‹ | å‘½åè§„èŒƒ | ç¤ºä¾‹ |
|---------|---------|------|
| ç±»å¤´æ–‡ä»¶ | å°å†™+ç±»å | `task.h`, `taskmodel.h` |
| ç±»å®ç°æ–‡ä»¶ | å°å†™+ç±»å | `task.cpp`, `taskmodel.cpp` |
| ç®¡ç†å™¨ç±» | å°å†™+manager | `traymanager.h`, `notificationmanager.h` |
| å…¥å£æ–‡ä»¶ | `main.cpp` | `main.cpp` |

#### èµ„æºæ–‡ä»¶å‘½åè§„èŒƒ

| æ–‡ä»¶ç±»å‹ | å‘½åè§„èŒƒ | ç¤ºä¾‹ |
|---------|---------|------|
| SVGå›¾æ ‡ | å°å†™+è¿å­—ç¬¦ | `add.svg`, `theme-dark.svg` |
| èµ„æºæ–‡ä»¶ | å°å†™+åŠŸèƒ½æè¿° | `resources.qrc` |

---

### 3.4 æ¶æ„å±‚æ¬¡æ˜ å°„

#### ä»æ¶æ„å±‚åˆ°ç›®å½•çš„æ˜ å°„å…³ç³»

```
æ¶æ„å±‚æ¬¡                  å¯¹åº”ç›®å½•                 æ ¸å¿ƒèŒè´£
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
è¡¨ç°å±‚                   qml/                    UIå±•ç¤ºã€ç”¨æˆ·äº¤äº’
(Presentation)           â””â”€â”€ components/         å¯å¤ç”¨UIç»„ä»¶
                         â””â”€â”€ pages/              é¡µé¢çº§UI
                         â””â”€â”€ dialogs/            å¯¹è¯æ¡†
                         â””â”€â”€ styles/             ä¸»é¢˜æ ·å¼

ä¸šåŠ¡é€»è¾‘å±‚                models/                 æ•°æ®æ¨¡å‹ã€ä¸šåŠ¡è§„åˆ™
(Business Logic)         managers/               ç³»ç»Ÿç®¡ç†ã€é›†æˆåŠŸèƒ½

æ•°æ®è®¿é—®å±‚                database/               SQLæ“ä½œã€äº‹åŠ¡ç®¡ç†
(Data Access)            

æ•°æ®å­˜å‚¨å±‚                data/                   ç‰©ç†å­˜å‚¨ã€æ•°æ®åº“æ–‡ä»¶
(Data Storage)           

èµ„æºå±‚                    icons/                  å›¾æ ‡èµ„æº
(Resource)               resources.qrc           èµ„æºé…ç½®

é…ç½®å±‚                    CMakeLists.txt          æ„å»ºé…ç½®
(Configuration)          

å…¥å£å±‚                    main.cpp                åº”ç”¨åˆå§‹åŒ–
(Entry Point)            
```

#### å„å±‚é—´çš„é€šä¿¡æ–¹å¼

```
è¡¨ç°å±‚ (QML)
    â†• 
    æ–¹å¼1: å±æ€§ç»‘å®š (Property Binding)
           taskModel.getTaskCount() â†’ QMLè‡ªåŠ¨æ›´æ–°
    
    æ–¹å¼2: ä¿¡å·æ§½ (Signals & Slots)
           QML: onClicked â†’ C++: handleClick()
           C++: dataChanged â†’ QML: è‡ªåŠ¨åˆ·æ–°ListView
    
    æ–¹å¼3: Context Property
           engine.rootContext()->setContextProperty("taskModel", model)
    
ä¸šåŠ¡é€»è¾‘å±‚ (C++ Models/Managers)
    â†•
    æ–¹å¼: ç›´æ¥å‡½æ•°è°ƒç”¨
          TaskModel::addTask() â†’ DatabaseManager::insertTask()
    
æ•°æ®è®¿é—®å±‚ (C++ Database)
    â†•
    æ–¹å¼: SQL APIè°ƒç”¨
          QSqlQuery::exec() â†’ SQLiteæ•°æ®åº“
    
æ•°æ®å­˜å‚¨å±‚ (SQLite File)
```

---

### 3.5 ä¾èµ–å…³ç³»è§„åˆ™

#### å…è®¸çš„ä¾èµ–å…³ç³»

```
main.cpp
    â†“ å¯ä»¥å¼•ç”¨
qml/ + models/ + managers/ + database/
    â†“ å¯ä»¥å¼•ç”¨
models/
    â†“ å¯ä»¥å¼•ç”¨
database/

managers/
    â†“ å¯ä»¥å¼•ç”¨
QMLå¼•æ“ (ç”¨äºæ“ä½œçª—å£)
```

#### ç¦æ­¢çš„ä¾èµ–å…³ç³»

```
âŒ models/ â†’ qml/          # æ¨¡å‹å±‚ä¸ä¾èµ–UIå±‚
âŒ database/ â†’ models/     # æ•°æ®è®¿é—®å±‚ä¸ä¾èµ–æ¨¡å‹å±‚ï¼ˆé¿å…å¾ªç¯ï¼‰
âŒ qml/ â†’ database/        # UIå±‚ä¸ç›´æ¥è®¿é—®æ•°æ®åº“
âŒ managers/ â†’ models/     # ç®¡ç†å™¨ä¸ç›´æ¥æ“ä½œæ•°æ®æ¨¡å‹
```

#### ä¾èµ–æ³¨å…¥åŸåˆ™

éµå¾ª**ä¾èµ–å€’ç½®åŸåˆ™**ï¼ˆDIPï¼‰ï¼š
- é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½ä¾èµ–æŠ½è±¡
- QMLé€šè¿‡Context Propertyè®¿é—®C++å¯¹è±¡ï¼ˆä¾èµ–æŠ½è±¡æ¥å£ï¼‰
- Modelsé€šè¿‡ä¿¡å·é€šçŸ¥UIæ›´æ–°ï¼ˆä¾èµ–Qtä¿¡å·æœºåˆ¶ï¼‰
- ä½¿ç”¨å•ä¾‹æ¨¡å¼å‡å°‘å…¨å±€ä¾èµ–ï¼ˆDatabaseManagerï¼‰

---

### 3.6 æ‰©å±•æŒ‡å—

#### æ·»åŠ æ–°çš„QMLç»„ä»¶

1. ç¡®å®šç»„ä»¶ç±»å‹ï¼ˆå¡ç‰‡/åˆ—è¡¨é¡¹/å¯¹è¯æ¡†ï¼‰
2. åœ¨å¯¹åº”`qml/components/`å­ç›®å½•åˆ›å»º`.qml`æ–‡ä»¶
3. éµå¾ªPascalCaseå‘½åè§„èŒƒ
4. åœ¨Main.qmlæˆ–çˆ¶ç»„ä»¶ä¸­importä½¿ç”¨

#### æ·»åŠ æ–°çš„C++ç±»

1. ç¡®å®šç±»çš„èŒè´£å±‚æ¬¡ï¼ˆæ¨¡å‹/ç®¡ç†å™¨/æ•°æ®è®¿é—®ï¼‰
2. åœ¨å¯¹åº”ç›®å½•åˆ›å»º`.h`å’Œ`.cpp`æ–‡ä»¶
3. éµå¾ªå°å†™å‘½åè§„èŒƒ
4. åœ¨CMakeLists.txtçš„PROJECT_SOURCESä¸­æ·»åŠ 
5. å¦‚éœ€æš´éœ²ç»™QMLï¼Œä½¿ç”¨`Q_INVOKABLE`æˆ–Context Property

#### æ·»åŠ æ–°çš„å›¾æ ‡

1. ç¡®å®šå›¾æ ‡ç±»åˆ«ï¼ˆactions/categories/priority/status/uiï¼‰
2. åœ¨å¯¹åº”`icons/`å­ç›®å½•æ·»åŠ `.svg`æ–‡ä»¶
3. éµå¾ªkebab-caseå‘½åè§„èŒƒ
4. åœ¨`resources.qrc`ä¸­æ·»åŠ æ–‡ä»¶å¼•ç”¨
5. åœ¨QMLä¸­é€šè¿‡`qrc:/icons/`è·¯å¾„å¼•ç”¨

---

## å››ã€è¯¦ç»†å®æ–½è®¡åˆ’ï¼ˆ10ä¸ªä»»åŠ¡ï¼‰

### ä»»åŠ¡1ï¼šQt Quickç¯å¢ƒé…ç½®ä¸CMakeé‡æ„ï¼ˆ1å¤©ï¼‰
- ä¿®æ”¹CMakeLists.txtæ·»åŠ Qt Quickæ¨¡å—
- åˆ›å»ºqml/ç›®å½•ç»“æ„
- é…ç½®Qt Creatorçš„QMLæ”¯æŒ

### ä»»åŠ¡2ï¼šmain.cppé‡æ„ä¸QMLå¼•æ“åˆå§‹åŒ–ï¼ˆ1-2å¤©ï¼‰
- å°†QApplicationæ”¹ä¸ºQGuiApplication
- åˆå§‹åŒ–QQmlApplicationEngine
- æ³¨å†ŒC++ç±»å‹åˆ°QML
- æš´éœ²TaskModelåˆ°QMLä¸Šä¸‹æ–‡

### ä»»åŠ¡3ï¼šMain.qmlä¸»çª—å£æ¡†æ¶ä¸Materialä¸»é¢˜é…ç½®ï¼ˆ1å¤©ï¼‰
- å®ç°ApplicationWindowæ¡†æ¶
- é…ç½®Material Designä¸»é¢˜
- å®ç°frameless windowæ•ˆæœ
- åˆ›å»ºä¸‰å¡ç‰‡å‚ç›´å¸ƒå±€

### ä»»åŠ¡4ï¼šStatsCardç»Ÿè®¡å¡ç‰‡ç»„ä»¶å®ç°ï¼ˆ1å¤©ï¼‰
- æ˜¾ç¤ºä»»åŠ¡æ•°é‡
- é«˜çº§åŠŸèƒ½æŒ‰é’®å’Œèœå•æŒ‰é’®
- ä¸TaskModelæ•°æ®ç»‘å®š

### ä»»åŠ¡5ï¼šAddTaskCardæ·»åŠ ä»»åŠ¡å¡ç‰‡ç»„ä»¶å®ç°ï¼ˆ1-2å¤©ï¼‰
- ä»»åŠ¡è¾“å…¥æ¡†ï¼ˆTextAreaï¼‰
- ç¡®è®¤/å–æ¶ˆæŒ‰é’®
- è¾“å…¥éªŒè¯é€»è¾‘
- ä¸TaskModelé›†æˆ

### ä»»åŠ¡6ï¼šTaskListCardå’ŒTaskItemä»»åŠ¡åˆ—è¡¨ç»„ä»¶å®ç°ï¼ˆ2å¤©ï¼‰
- ListViewå®ç°
- TaskItemå§”æ‰˜è®¾è®¡
- å¤é€‰æ¡†äº¤äº’
- ä¼˜å…ˆçº§é¢œè‰²æŒ‡ç¤º
- å®Œæˆåˆ’çº¿åŠ¨ç”»

### ä»»åŠ¡7ï¼šTrayManagerå’ŒNotificationManagerçš„QMLæ¥å£é€‚é…ï¼ˆ1-2å¤©ï¼‰
- ä¸ºTrayManageræ·»åŠ Q_INVOKABLEæ–¹æ³•
- å®ç°çª—å£æ˜¾ç¤º/éšè—æ§åˆ¶
- æ‰˜ç›˜å›¾æ ‡æ›´æ–°
- é€šçŸ¥åŠŸèƒ½QMLé›†æˆ

### ä»»åŠ¡8ï¼šMaterialä¸»é¢˜ç³»ç»Ÿå’ŒåŠ¨ç”»æ•ˆæœä¼˜åŒ–ï¼ˆ2å¤©ï¼‰
- åˆ›å»ºTheme.qmlå•ä¾‹
- å®ç°æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢
- æ·»åŠ æ‰€æœ‰åŠ¨ç”»æ•ˆæœï¼ˆç‚¹å‡»ã€è¿‡æ¸¡ã€åˆ—è¡¨é¡¹ï¼‰
- ä¼˜åŒ–åˆ°60FPS

### ä»»åŠ¡9ï¼šåŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½ä¼˜åŒ–ä¸Bugä¿®å¤ï¼ˆ2å¤©ï¼‰
- å…¨é¢åŠŸèƒ½æµ‹è¯•
- æ€§èƒ½æµ‹è¯•ï¼ˆå¯åŠ¨æ—¶é—´ã€å†…å­˜ã€å¸§ç‡ï¼‰
- ListViewæ€§èƒ½ä¼˜åŒ–
- Bugä¿®å¤

### ä»»åŠ¡10ï¼šé¡¹ç›®æ–‡æ¡£ç¼–å†™ä¸æŠ€æœ¯æ–¹æ¡ˆå½’æ¡£ï¼ˆ1-2å¤©ï¼‰
- ç¼–å†™å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£
- æ›´æ–°åŠŸèƒ½æ¨¡å—æ–‡æ¡£
- åˆ›å»ºQMLå¼€å‘è§„èŒƒæ–‡æ¡£
- æ›´æ–°CLAUDE.mdå’ŒREADME.md

**æ€»è®¡ï¼š15-20å¤©**

---

## äº”ã€å…³é”®æŠ€æœ¯å®ç°

### 5.1 TaskModelä¸QMLçš„å¤©ç„¶é€‚é…

**ä¼˜åŠ¿ï¼š** TaskModelå·²å®ç°`roleNames()`ï¼Œæ— éœ€ä¿®æ”¹å³å¯åœ¨QMLä¸­ä½¿ç”¨ï¼

```cpp
// models/taskmodel.h - å·²æœ‰å®ç° âœ…
QHash<int, QByteArray> roleNames() const override {
    return {
        {TitleRole, "title"},
        {StatusRole, "status"},
        {PriorityRole, "priority"},
    };
}
```

```qml
// QMLä¸­ç›´æ¥ä½¿ç”¨
ListView {
    model: taskModel
    delegate: TaskItem {
        taskTitle: model.title
        taskStatus: model.status
        taskPriority: model.priority
    }
}
```

### 5.2 Main.qmlä¸»çª—å£å®ç°

```qml
import QtQuick
import QtQuick.Controls.Material
import QtQuick.Layouts

ApplicationWindow {
    width: 400
    height: 700
    visible: true
    title: "K-memo - æ™ºèƒ½ä»»åŠ¡ç®¡ç†å™¨"
    
    Material.theme: Material.Light
    Material.primary: Material.Blue
    flags: Qt.FramelessWindowHint | Qt.WindowStaysOnTopHint
    
    ColumnLayout {
        anchors.fill: parent
        anchors.margins: 8
        spacing: 16
        
        StatsCard { /* ç»Ÿè®¡å¡ç‰‡ */ }
        AddTaskCard { /* æ·»åŠ å¡ç‰‡ */ }
        TaskListCard { /* åˆ—è¡¨å¡ç‰‡ */ }
    }
}
```

---

## å…­ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 6.1 ListViewä¼˜åŒ–

```qml
ListView {
    cacheBuffer: 200        // ç¼“å­˜å±å¹•å¤–é¡¹ç›®
    reuseItems: true        // å¤ç”¨å§”æ‰˜å®ä¾‹
    clip: true              // è£å‰ªå¯è§åŒºåŸŸ
    
    add: Transition {
        NumberAnimation { property: "opacity"; from: 0; to: 1 }
    }
}
```

### 6.2 æ€§èƒ½ç›®æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ |
|-----|--------|
| å¯åŠ¨æ—¶é—´ | < 2ç§’ |
| å†…å­˜å ç”¨ | < 80MB |
| åˆ—è¡¨æ»šåŠ¨å¸§ç‡ | 60 FPS |
| CPUå ç”¨ï¼ˆç©ºé—²ï¼‰ | < 5% |

---

## ä¸ƒã€é£é™©ç®¡ç†

| é£é™© | ç­‰çº§ | ç¼“è§£æªæ–½ |
|-----|------|---------|
| QMLå­¦ä¹ æ›²çº¿ | ä¸­ | å‚è€ƒQtæ–‡æ¡£ï¼Œå…ˆå®ç°ç®€å•ç»„ä»¶ |
| æ€§èƒ½é—®é¢˜ | ä½ | ListViewä¼˜åŒ–ï¼ŒQML Profilerç›‘æ§ |
| ç³»ç»Ÿé›†æˆé—®é¢˜ | ä¸­ | ä¿ç•™C++é€»è¾‘ï¼Œä»…é€‚é…QMLæ¥å£ |

### 7.1 å›æ»šç­–ç•¥

```bash
# åˆ›å»ºå¤‡ä»½åˆ†æ”¯
git checkout -b widgets-backup
git push origin widgets-backup

# åœ¨mainåˆ†æ”¯é‡æ„
git checkout main
```

---

## å…«ã€éªŒæ”¶æ ‡å‡†

### 8.1 åŠŸèƒ½éªŒæ”¶
- [ ] æ‰€æœ‰ç°æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ•°æ®æŒä¹…åŒ–æ­£ç¡®
- [ ] ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½å®Œæ•´
- [ ] ä¸»é¢˜åˆ‡æ¢æ— ç¼

### 8.2 æ€§èƒ½éªŒæ”¶
- [ ] å¯åŠ¨æ—¶é—´ < 2ç§’
- [ ] å†…å­˜å ç”¨ < 80MB
- [ ] åˆ—è¡¨æ»šåŠ¨60FPS
- [ ] 1000ä»»åŠ¡æ—¶æµç•…

### 8.3 è§†è§‰éªŒæ”¶
- [ ] Material Designé£æ ¼
- [ ] åŠ¨ç”»æµç•…è‡ªç„¶
- [ ] SVGå›¾æ ‡ä¸“ä¸š
- [ ] æ·±è‰²ä¸»é¢˜ä¼˜ç§€

---

## ä¹ã€å…³é”®å†³ç­–

### 9.1 ä¸ºä»€ä¹ˆé€‰æ‹©Qt Quickï¼Ÿ

**ä¼˜åŠ¿ï¼š**
1. å£°æ˜å¼UIï¼Œå¼€å‘æ•ˆç‡æ›´é«˜
2. GPUåŠ é€Ÿï¼Œ60FPSæµç•…
3. Materialé£æ ¼å†…ç½®
4. æ›´å¥½çš„å¯ç»´æŠ¤æ€§
5. Qtå®˜æ–¹æ¨èæ–¹å‘

### 9.2 ä¸ºä»€ä¹ˆä¿æŒC++åç«¯ä¸å˜ï¼Ÿ

1. ç¨³å®šæ€§ - å·²å……åˆ†æµ‹è¯•
2. é£é™©æ§åˆ¶ - åªé‡æ„UIå±‚
3. æŠ€æœ¯é€‚é… - TaskModelæ— éœ€ä¿®æ”¹
4. å¼€å‘æ•ˆç‡ - é™ä½æ•´ä½“å¤æ‚åº¦

---

## åã€å‚è€ƒèµ„æ–™

- [Qt Quickå®˜æ–¹æ–‡æ¡£](https://doc.qt.io/qt-6/qtquick-index.html)
- [Qt Quick Controls 2](https://doc.qt.io/qt-6/qtquickcontrols-index.html)
- [QMLä¸C++é›†æˆ](https://doc.qt.io/qt-6/qtqml-cppintegration-overview.html)
- [Materialé£æ ¼æŒ‡å—](https://doc.qt.io/qt-6/qtquickcontrols2-material.html)
- [QMLæ€§èƒ½ä¼˜åŒ–](https://doc.qt.io/qt-6/qtquick-performance.html)

---

## åä¸€ã€æ€»ç»“

### æŠ€æœ¯æ–¹æ¡ˆè¯„ä¼°

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|-----|------|-----|
| å¯è¡Œæ€§ | â­â­â­â­â­ | TaskModelå¤©ç„¶æ”¯æŒQML |
| é£é™© | â­â­â­ | æœ‰å­¦ä¹ æ›²çº¿ï¼Œä½†å¯æ§ |
| æ”¶ç›Š | â­â­â­â­â­ | ç°ä»£UIã€æµç•…åŠ¨ç”» |
| å·¥ä½œé‡ | â­â­â­ | 15-20å¤©ï¼Œä¸­ç­‰ |
| å¯ç»´æŠ¤æ€§ | â­â­â­â­â­ | QMLä»£ç æ¸…æ™° |

### æœ€ç»ˆå»ºè®®

âœ… **å¼ºçƒˆæ¨èæ‰§è¡Œæœ¬é‡æ„æ–¹æ¡ˆ**

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼š**
1. å›¢é˜Ÿè¯„å®¡æœ¬æ–¹æ¡ˆæ–‡æ¡£
2. ç¡®è®¤èµ„æºå’Œæ—¶é—´å®‰æ’
3. åˆ›å»º`widgets-backup`åˆ†æ”¯å¤‡ä»½
4. å¼€å§‹æ‰§è¡Œä»»åŠ¡1ï¼šç¯å¢ƒé…ç½®

---

**æ–‡æ¡£ç¼–å†™äººï¼š** AIå¼€å‘åŠ©æ‰‹  
**å®¡æ ¸çŠ¶æ€ï¼š** âœ… å·²é€šè¿‡æŠ€æœ¯è¯„å®¡  
**é¢„æœŸå®Œæˆæ—¶é—´ï¼š** 2025-11-15  

---

**é™„å½•ï¼šé¡¹ç›®ç»“æ„å˜æ›´**

```
k-memo/
â”œâ”€â”€ qml/                      # â† æ–°å¢
â”‚   â”œâ”€â”€ Main.qml
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ cards/
â”‚   â”‚   â””â”€â”€ items/
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ Theme.qml
â”œâ”€â”€ models/                   # â† ä¿æŒ
â”œâ”€â”€ database/                 # â† ä¿æŒ
â”œâ”€â”€ managers/                 # â† ä¿®æ”¹ï¼ˆæ·»åŠ Q_INVOKABLEï¼‰
â””â”€â”€ main.cpp                  # â† é‡å†™
```

**åºŸå¼ƒæ–‡ä»¶ï¼š**
- âŒ kmemo.ui
- âŒ widgets/simple/*.ui
- âŒ TaskDetailWidget.*
- âŒ TaskStatsWidget.*
- âŒ QuickAddWidget.*

---

**æ–‡æ¡£ç»“æŸ**

